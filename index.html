<html lang="ko">
<head>
    <meta charset="UTF-8">

    <!-- 0.8.0 안됨 ^^ ㅋㅋㅋㅋㅋㅋㅋㅋㅋ-->
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="js/vendor/jquery-3.2.1.min.js"></script>
    <script>


        /*   var start = AFRAME.registerComponent('session', {
               init: function () {


                   var knock = document.getElementById("knock");
                   var heart = document.getElementById("heart");
                   var tt = document.getElementById("tt");

                   knock.autoplay = false;
                   heart.autoplay = false;
                   tt.autoplay = false;

                   var cursor = document.querySelector("#cursor");

                   cursor.addEventListener('mouseleave', function (evt) {
                       this.setAttribute('color', 'black');
                       var scale = evt.detail.intersectedEl.object3D.scale;
                       scale.set(0.5, 0.5, 0.5);
                   });

                   cursor.addEventListener('mouseenter', function (evt) {
                       this.setAttribute('color', 'springgreen');
                       var scale = evt.detail.intersectedEl.object3D.scale;
                       scale.set(2, 2, 2);
                   });
               },

               tick: function (time, timeDelta) {
                   var rotation = document.querySelector("#camera").getAttribute('rotation');
                   var videoArr = [];
                   videoArr.push(document.getElementById("knock")); // -60 ~ 60
                   videoArr.push(document.getElementById("heart")); // 60 ~ 180
                   videoArr.push(document.getElementById("tt")); // -60 ~ -180 videoArr = {knock, heart, tt}
                   // 배열 1개만들어서 <- 영상을 집어넣고,

                   var regYaw = function (yaw) {
                       if (yaw >= 0)
                           yaw -= 360 * parseInt(yaw / 360);
                       else
                           yaw += 360 * ((parseInt(yaw / 360) * -1) + 1);
                       return yaw;
                   };


                   var play = function (id) {
                       videoArr.forEach(function (item) {
                           if (item.id === id)
                               item.play();
                           else
                               item.pause();
                       })
                   };

                   var auto = function (value) {
                       var yaw = regYaw(value);

                       if (yaw >= 300 || yaw < 60) {
                           play("knock");
                       }
                       else if (yaw >= 60 && yaw < 180) {
                           play("tt");
                       }
                       else if (yaw >= 180 && yaw < 300) {
                           play("heart");
                       }
                   };

                   auto(rotation.y);
               }
           }); */

        // Animate size.

    </script>
</head>
<body>
<a-scene session id="video">
    <!--<a-entity id=camera camera="active: true" look-controls wasd-controls position="0 0 0" data-aframe-default-camera>-->

    <a-assets>
        <img id="city" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg">
        <img id="cubes-thumb" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/thumb-cubes.jpg">
        <img id="session_name" src="./src/img/session_name.png">
        <img id="hmd" src="./src/img/hmd.png">

        <script id="plane" type="text/html">
            <a-entity class="link"
                      geometry="primitive: plane; height: 1; width: 1"
                      material="shader: flat; src: ${thumb}"></a-entity>
        </script>
    </a-assets>
    <!--camera는 내 화면의 위치, cursor 마우스 커서같은거-->
    <a-entity id="entity" position="0 0 0">
        <a-camera id="camera">
            <a-cursor id="cursor"></a-cursor>
        </a-camera>
    </a-entity>

    <a-sky id="image-360" radius="10" src="#city"></a-sky>


    <a-entity id="size" position="0 3.5 -3" scale="5 1.5 1"
              text="color: #ff0000; align: center; value: Welcome!; width: 1.5"></a-entity>

    <a-entity class="link" geometry="primitive: plane; height: 0.5; width: 0.5" position="-1.2 2 -3"
              material="shader: flat; src: #hmd"></a-entity>
    <a-entity class="link" geometry="primitive: plane; height: 0.5; width: 3" position="-3 2 -3"
              material="shader: flat; src: #session_name"></a-entity>

    <a-entity id="links" layout="layout: line; margin: 1.8" position="-3 2 -3">
        <a-entity template="src: #plane" data-thumb="#session_name"></a-entity>
        <a-entity template="src: #plane" data-thumb="#hmd"></a-entity>
    </a-entity>


    <a-plane id="session2" position="3 2 -3" scale="1.5 1 1"
             light="type: point; intensity: 2.0" text="value: 2; align: center; width: 2"></a-plane>

    <a-plane id="session3" position="-3 0 -3" scale="1.5 1 1"
             light="type: point; intensity: 2.0" text="value: 3; align: center; width: 2"></a-plane>

    <a-plane id="session4" position="3 0 -3" scale="1.5 1 1"
             light="type: point; intensity: 2.0" text="value: 4; align: center; width: 2"></a-plane>

    <!-- assets은 video, img같은 자원을 로딩해줌 (화면 띄우기 ㄴㄴ)-->
    <a-assets id="videoGroup">
        <video id="knock" loop="true" src="./src/twice-knock%20knock.mp4"></video>
        <video id="heart" loop="true" src="./src/twice-heart%20shake.mp4"></video>
        <video id="tt" loop="true" src="./src/twice-TT.mp4"></video>
    </a-assets>


    <!-- Using the asset management system. -->`
    <!-- position "좌우, undown depth" -->
    <!--a-video를 통해 assets에서 로드해준 동영상 사용 ascene에 어떻게 배치할건지 설정-->
    <a-entity visible="false">
        <a-video id="video1" src="#knock" width="16" height="9" position="0 0 -20" scale="0.5 0.5 0.5"
                 rotation="0 0 0"></a-video>
        <a-video id="video2" src="#heart" width="16" height="9" position="17.32 0 10" scale="0.5 0.5 0.5"
                 rotation="180 60 180"></a-video>
        <a-video id="video3" src="#tt" width="16" height="9" position="-17.32 0 10" scale="0.5 0.5 0.5"
                 rotation="180 -60 180"></a-video>
    </a-entity>

    <!-- Defining the URL inline. Not recommended but more comfortable for web developers. -->
</a-scene>

<script>
    var size = document.getElementById("size");
    var objsize = {scale: 25};
    var tween = new AFRAME.TWEEN.Tween(objsize)
        .to({scale: 20}, 1000)
        .repeat(Infinity)
        .yoyo(true)
        .onUpdate(function () {
            size.setAttribute('text', 'wrapCount', objsize.scale);
        })
        .start();
</script>

</body>
</html>
